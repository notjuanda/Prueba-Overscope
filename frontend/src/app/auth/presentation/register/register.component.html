<div class="min-h-screen grid grid-cols-1 md:grid-cols-2">
    <section class="relative px-8 md:px-20 py-8 md:py-12 min-h-[100svh] flex flex-col justify-center">
        <div class="max-w-md">
        <h1 class="text-3xl md:text-4xl font-semibold tracking-tight mt-1">Crear cuenta</h1>
        </div>

        <form [formGroup]="form" (ngSubmit)="submit()" class="max-w-md mt-10 space-y-6">
        <div class="space-y-1">
            <label class="block text-sm">Nombre</label>
            <input type="text" formControlName="firstName"
                class="w-full rounded-xl border px-4 py-3 outline-hidden focus:outline-2 focus:outline-(--color-primary)
                        border-(--color-muted) [ &.ng-touched.ng-invalid ]:border-red-500 bg-white"
                placeholder="Tu nombre" autocomplete="given-name" />
            <p class="text-red-600 text-xs" *ngIf="form.controls['firstName'].touched && form.controls['firstName'].invalid">
            <span *ngIf="form.controls['firstName'].errors?.['required']">El nombre es requerido.</span>
            <span *ngIf="form.controls['firstName'].errors?.['minlength']">Mínimo 2 caracteres.</span>
            <span *ngIf="form.controls['firstName'].errors?.['maxlength']">Máximo 60 caracteres.</span>
            </p>
        </div>

        <div class="space-y-1">
            <label class="block text-sm">Apellido (opcional)</label>
            <input type="text" formControlName="lastName"
                class="w-full rounded-xl border px-4 py-3 outline-hidden focus:outline-2 focus:outline-(--color-primary)
                        border-(--color-muted) [ &.ng-touched.ng-invalid ]:border-red-500 bg-white"
                placeholder="Tu apellido" autocomplete="family-name" />
            <p class="text-red-600 text-xs" *ngIf="form.controls['lastName'].touched && form.controls['lastName'].invalid">
            <span *ngIf="form.controls['lastName'].errors?.['maxlength']">Máximo 60 caracteres.</span>
            </p>
        </div>

        <div class="space-y-1">
            <label class="block text-sm">E-mail</label>
            <div class="relative">
            <input type="email" formControlName="email"
                    class="w-full rounded-xl border px-4 pr-12 py-3 outline-hidden focus:outline-2 focus:outline-(--color-primary)
                            border-(--color-muted) [ &.ng-touched.ng-invalid ]:border-red-500 bg-white"
                    placeholder="example@email.com" autocomplete="email" />
            <span class="absolute inset-y-0 right-4 flex items-center text-(--color-text)/50 pointer-events-none">
                <svg class="block size-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <path d="M3 7l9 6 9-6"/>
                <rect x="3" y="5" width="18" height="14" rx="2" ry="2"/>
                </svg>
            </span>
            </div>
            <p class="text-red-600 text-xs" *ngIf="form.controls['email'].touched && form.controls['email'].invalid">
            <span *ngIf="form.controls['email'].errors?.['required']">El email es requerido.</span>
            <span *ngIf="form.controls['email'].errors?.['email']">Formato de email inválido.</span>
            <span *ngIf="form.controls['email'].errors?.['maxlength']">Máximo 120 caracteres.</span>
            </p>
        </div>

        <div class="space-y-1">
            <label class="block text-sm">Password</label>
            <div class="relative">
            <input [type]="hidePassword() ? 'password' : 'text'" formControlName="password"
                    class="w-full rounded-xl border px-4 pr-12 py-3 outline-hidden focus:outline-2 focus:outline-(--color-primary)
                            border-(--color-muted) [ &.ng-touched.ng-invalid ]:border-red-500 bg-white"
                    placeholder="Tu contraseña" autocomplete="new-password" />
            <button type="button" (click)="togglePassword()"
                    class="absolute inset-y-0 right-4 flex items-center text-(--color-text)/60 hover:text-(--color-text)"
                    aria-label="Mostrar/Ocultar">
                <svg *ngIf="hidePassword(); else eyeOff" class="block size-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12Z"/>
                <circle cx="12" cy="12" r="3"/>
                </svg>
                <ng-template #eyeOff>
                <svg class="block size-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                    <path d="M17.94 17.94A10.94 10.94 0 0 1 12 19c-7 0-11-7-11-7a21.77 21.77 0 0 1 5.06-5.94M9.9 4.24A10.94 10.94 0 0 1 12 5c7 0 11 7 11 7a21.8 21.8 0 0 1-3.17 4.49"/>
                    <path d="M1 1l22 22"/>
                </svg>
                </ng-template>
            </button>
            </div>
            <p class="text-red-600 text-xs" *ngIf="form.controls['password'].touched && form.controls['password'].invalid">
            <span *ngIf="form.controls['password'].errors?.['required']">La contraseña es requerida.</span>
            <span *ngIf="form.controls['password'].errors?.['minlength']">Mínimo 6 caracteres.</span>
            <span *ngIf="form.controls['password'].errors?.['maxlength']">Máximo 128 caracteres.</span>
            </p>
        </div>

        <div class="space-y-1">
            <label class="block text-sm">Confirmar Password</label>
            <div class="relative">
            <input [type]="hideConfirm() ? 'password' : 'text'" formControlName="confirmPassword"
                    class="w-full rounded-xl border px-4 pr-12 py-3 outline-hidden focus:outline-2 focus:outline-(--color-primary)
                            border-(--color-muted) [ &.ng-touched.ng-invalid ]:border-red-500 bg-white"
                    placeholder="Repite tu contraseña" autocomplete="new-password" />
            <button type="button" (click)="toggleConfirm()"
                    class="absolute inset-y-0 right-4 flex items-center text-(--color-text)/60 hover:text-(--color-text)"
                    aria-label="Mostrar/Ocultar">
                <svg *ngIf="hideConfirm(); else eyeOff2" class="block size-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12Z"/>
                <circle cx="12" cy="12" r="3"/>
                </svg>
                <ng-template #eyeOff2>
                <svg class="block size-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                    <path d="M17.94 17.94A10.94 10.94 0 0 1 12 19c-7 0-11-7-11-7a21.77 21.77 0 0 1 5.06-5.94M9.9 4.24A10.94 10.94 0 0 1 12 5c7 0 11 7 11 7a21.8 21.8 0 0 1-3.17 4.49"/>
                    <path d="M1 1l22 22"/>
                </svg>
                </ng-template>
            </button>
            </div>
            <p class="text-red-600 text-xs" *ngIf="form.touched && form.errors?.['passwordsMismatch']">
            Las contraseñas no coinciden.
            </p>
        </div>

        <p class="text-red-600 text-sm" *ngIf="error() as e">{{ e }}</p>

        <button type="submit"
                class="w-full rounded-xl px-4 py-3 text-white bg-(--color-primary) hover:bg-(--color-secondary)
                        disabled:opacity-60 disabled:pointer-events-none transition flex items-center justify-center gap-2"
                [disabled]="form.invalid || submitting()">
            <span *ngIf="!submitting(); else loading">Crear cuenta</span>
            <ng-template #loading>
            <svg class="animate-spin size-5" viewBox="0 0 24 24" fill="none">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path>
            </svg>
            Registrando…
            </ng-template>
        </button>

        <p class="text-sm text-(--color-text)/70">¿Ya tienes cuenta?
            <a class="text-(--color-primary) hover:text-(--color-secondary)" routerLink="/login">Inicia sesión</a>
        </p>
        </form>
    </section>

    <div class="hidden md:block relative border-l border-(--color-muted)">
        <div class="absolute inset-0 bg-center bg-cover" style="background-image: url('/images/images.jpg');"></div>
        <div class="absolute inset-0 bg-linear-to-tr from-(--color-primary)/10 to-(--color-secondary)/20"></div>
    </div>
</div>
